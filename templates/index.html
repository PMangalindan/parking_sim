<!DOCTYPE html>
<html>
<head>
    <title>Flask Rectangle Control</title>
    <style>
        .container {
            width: 400px;
            height: 300px;
            background: #eee;
            border: 2px solid #444;
            position: relative;
            margin-bottom: 20px;
        }

        .box {
            position: absolute;
            transform-origin: center;
            border: 2px solid black;
            /* Blue body, red front stripe on right side */
            background: linear-gradient(90deg, blue 70%, red 30%);
        }

        button, input {
            padding: 8px;
            font-size: 16px;
            margin: 5px;
        }

        input {
            width: 80px;
        }
    </style>
</head>
<body>

<h2>Rectangle Car Control (Forward / Reverse)</h2>

<div class="container">
    <div class="box"
         style="
            top: {{ pos.top }}px;
            left: {{ pos.left }}px;
            width: {{ pos.length }}px;
            height: {{ pos.width }}px;
            transform: rotate({{ pos.angle }}deg);
         ">
    </div>
</div>

<!-- Movement Controls -->
<form method="POST">
    
    
    <button name="move" value="rotate_ccw">Rotate CCW ⟲</button>
    <button name="move" value="rotate_cw">Rotate CW ⟳</button>

    <button name="move" value="forward">Forward</button>
    <button name="move" value="reverse">Reverse</button>

</form>

<hr>

<!-- Resize Form -->
<form method="POST">
    

    <input type="number" name="length" value="{{ pos.length }}">
    <input type="number" name="width" value="{{ pos.width }}">
    <button name="move" value="resize">Resize</button>

</form>


<script>
    document.addEventListener("keydown", function(event) {

        // Forward = F key
        if (event.key === "f" || event.key === "F") {
            sendMove("forward");
        }

        // Reverse = R key
        if (event.key === "r" || event.key === "R") {
            sendMove("reverse");
        }

        // Rotate Counter-Clockwise = Left Arrow
        if (event.key === "ArrowLeft") {
            sendMove("rotate_ccw");
        }

        // Rotate Clockwise = Right Arrow
        if (event.key === "ArrowRight") {
            sendMove("rotate_cw");
        }
    });

    function sendMove(action) {
        const form = document.createElement("form");
        form.method = "POST";

        const input = document.createElement("input");
        input.type = "hidden";
        input.name = "move";
        input.value = action;

        form.appendChild(input);
        document.body.appendChild(form);
        form.submit();
    }
</script>


</body>
</html>
